<link rel="stylesheet" href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css">
  <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>



<body >
  <div x-data="app()" x-cloak class="antialiased sans-serif bg-gray-200">
  
    
    <div class="container mx-auto py-5">
          
 <div class="bg-white rounded-lg shadow p-6 mb-8">
            <div class="flex w-full">
              <div class="flex-shrink-0 mr-5">
                <div class="cursor-pointer font-bold w-12 h-12 bg-gray-300 flex items-center justify-center rounded-full">
                  <span x-text="generateAvatarFromName('Current User')" class="uppercase text-gray-700"></span>
                </div>
              </div>
              <div class="flex-1">
                <textarea x-model="tweetText" 
                  class="mb-2 bg-gray-200 focus:outline-none focus:shadow-outline focus:bg-white border border-transparent rounded-lg py-2 px-4 block w-full appearance-none leading-normal placeholder-gray-700" 
                  :class="{'border border-red-500': tweetIsOutOfRange() && tweetText.length != 0 }"
                  rows="3"
                  placeholder="What's happening..."></textarea>

                  <div class="relative w-auto mb-2 border rounded-lg relative bg-gray-100 mb-4 shadow-inset overflow-hidden" x-show="images.length > 0">
                    <div class="gg-container">
                      <div class="gg-box square-gallery" style="margin: 0">
                        <template x-for="image in images">
                          <img class="object-cover w-full" :src="image" />
                        </template>
                      </div>
                    </div>
                    <div @click="images = []; document.getElementById('fileInput').value = ''" class="shadow cursor-pointer absolute top-0 right-0 p-2 mr-2 mt-2 rounded-full bg-gray-600">
                      <svg class="h-6 w-6 text-gray-100"  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>                  
                    </div>
                  </div>
      
                  <input multiple name="photo" id="fileInput" accept="image/*" class="hidden" type="file" @change="let files = document.getElementById('fileInput').files; 
                    for (var i = 0; i < files.length; i++) {
                        var reader = new FileReader();
                        reader.onload = (e) => images.push(e.target.result);
                        reader.readAsDataURL(files[i]);
                    }
                  ">
                  
                  <div class="flex justify-between items-center">
                    <div>
                      <label 
                        for="fileInput"
                        type="button"
                        class="-ml-2 cursor-pointer inine-flex justify-between items-center focus:outline-none p-2 rounded-full text-gray-500 bg-white hover:bg-gray-200"
                      >
                        <svg class="h-6 w-6 text-gray-500"  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                          </svg>  
                      </label>
                    </div>
                    <div>
                      <span :class="{ 'text-red-600': charactersRemaining() <= 20 && charactersRemaining() > 10, 'text-red-400': charactersRemaining() <= 10 }" class="mr-3 text-sm text-gray-600" x-text="charactersRemaining()"></span>
      
                      <button
                        @click="saveTweet()"
                        :disabled="(tweetText == '') || tweetIsOutOfRange()"
                        :class="{'cursor-not-allowed opacity-50': (tweetText == '') || tweetIsOutOfRange()}"
                        type="button"
                        class="w-32 focus:outline-none border border-transparent py-2 px-5 rounded-lg shadow text-center text-white bg-blue-500 hover:bg-blue-600 font-medium" 
                      >Post</button>
                    </div>
                  </div>
              </div>
            </div>

          </div>


      

    </div>
  </div>


</body>
