<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learn Web Coding > Add to home screen on localhost</title>
  <link rel="manifest" href="/manifest.json">
  <style>
    .add-to {
      background-color: #E02D44; 
      width: 100%; /* Ajuste para pantallas pequeñas */
      max-width: 300px; /* Ancho máximo para pantallas grandes */
      margin: 20px auto; /* Centrar el botón */
    } 
    .add-to-btn {
      background-color: #E02D44; 
      color: white; 
      border: none; 
      outline: none; 
      font-weight: bold; 
      width: 100%; 
      height: 50px; 
    } 
  </style>
</head>
<body>
  <div class="container">
    <h1 class="text-center">Add to home screen feature on localhost</h1>
    <hr>
    <center>
      <div class="add-to">
        <button class="add-to-btn">Add to home screen</button>
      </div>
      <hr>  
      <img src="/icons/149071.png" alt="App Icon">
    </center>
  </div>
  <div style="position: fixed; bottom: 10px; right: 10px; color: green;">
      <strong>
          Learn Web Coding
      </strong>
  </div>
<script type="text/javascript">
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/sw.js').then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
      }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
      });
    });
  }

  let deferredPrompt;
  var div = document.querySelector('.add-to');
  var button = document.querySelector('.add-to-btn');
  div.style.display = 'none';

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    div.style.display = 'block';

    button.addEventListener('click', (e) => {
      div.style.display = 'none';
      deferredPrompt.prompt();
      deferredPrompt.userChoice
        .then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            console.log('User accepted the A2HS prompt');
          } else {
            console.log('User dismissed the A2HS prompt');
          }
          deferredPrompt = null;
        });
    });
  });
</script>
</body>
</html>
